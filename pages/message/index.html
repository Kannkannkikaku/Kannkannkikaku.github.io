<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>メッセージ一覧</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="../../images/kann-favicon.png">
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link rel="stylesheet" href="../../css/animation.css">
    <link rel="stylesheet" href="../../css/message.css">
    
    

    <script src="../../js/toggleMenu.js"></script>
    <script src="../../js/animation.js"></script>
    <script src="../../js/imageModal.js"></script>
    <!-- ページフリップのプラグイン -->
    <script type="text/javascript" src="../../js/extras/jquery.min.1.7.js"></script>
    <script type="text/javascript" src="../../js/extras/modernizr.2.5.3.min.js"></script>
    
</head>
<body class="page-sub">
    <button class="menu-btn" onclick="toggleMenu()">
        <img src="../../images/menu.png" alt="メニュー">
    </button>
    <!--headerここから-->
    <header>
        <div class="header">
            <div class="header-title">
                <a href="../../index.html" class="logo">菅叶和さんお誕生日企画2025</a>
                <span class="current-page">＞ メッセージ</span>
            </div>
        </div>
        <nav id="menu" class="side-menu">
            <a href="../message/"><img src="../../images/message.png" alt="メッセージ">メッセージ一覧</a>
            <a href="../illust/"><img src="../../images/illust.png" alt="イラスト">イラスト</a>
            <a href="../information/"><img src="../../images/information.png" alt="インフォ">インフォメーション</a>
            <a href="../../index.html"><img src="../../images/home.png" alt="トップ">トップページ</a>
        </nav>
        <div id="overlay" class="overlay" onclick="closeMenu()"></div>
    </header>
    <!--headerここまで-->
    <div id="page-content">
        <!--mainここから-->
        <main>
            <div class="container">
                <h2>📨 ファンの皆様からのメッセージ</h2>
            </div>
            
            <div class = "letterBook-viewport">
                <div class = "container">
                    <div class ="letterBook">
                        <div class ="hard" style = "background-image: url(../../messages/楽譜表紙small.jpg);"></div>
                        <div class ="hard" style = "background-image: url(../../messages/表紙裏.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-しば.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-みずきち.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-うしろまちむぎ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ハル.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-Findstr.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ゆゆきち.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-lanbery.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ごんじん.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-＃kim.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-シマワージ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-玉子焼きかけご飯.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-陸別.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-いずのあいちゃん.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-李塁治.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ムラツキ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-おさむ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-picapica.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-キングカズキ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-はりまろん.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-草色.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-金字塔.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-にっと.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ユユム.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-あーる。.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ドルビー.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-たわ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ウェイク.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-海風ソラタ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-llenn蓮.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-すみたく.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-出口.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ひろくん.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-いずあん.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-あややー.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-しゅーや.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ラテ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-アカキアカ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-りぐとね.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-モノ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-無のギンジ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-なかさん.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ちて.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-まるほい.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-スイカ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-自宅警備員たなか.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-Suzuka.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-kenny.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-めろんさわー.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-全力幼女.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ほわぁ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-あれれんれん.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-くま.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-バウムクーヘン.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ユッキー：幸希.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-yuki.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-うーちゃん.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ミケ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-みとりん.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-顔長マン.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ゆずころ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-なかはま.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-けいどら.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-さとつぺ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-よーい.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-コン.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ラディア.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-いんぷれざ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-〆.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ノギ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-かいゆー.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-幻音（そらね）.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-りゅりたん.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-薄荷.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-あんげ.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ゆきち.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-電池兎.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ジャスミン.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-半蔵.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-えぽ！.png);"></div>
                        <div style = "background-image: url(../../messages/メッセージ-ひー.png);">
                            <p>ひーさんメッセージ準備中</p>
                        </div>
                        <div style = "background-image: url(../../messages/メッセージ-レバ.png);">
                            <p>レバさんメッセージ準備中</p>
                        </div>
                        <div style = "background-image: url(../../messages/メッセージ-琉加るか.png);">

                        </div>
                        <div class ="hard" style = "background-image: url(../../messages/裏表紙裏.JPG);"></div>
                        <div class ="hard" style = "background-image: url(../../messages/楽譜裏表紙2small.jpg);"></div>
                    </div>
                </div>
            </div>

            <script type="text/javascript">
                const ASPECT_RATIO = 1.536; // 922 / 600
                const TOTAL_PAGES = 86; // ★総ページ数: 50ページを設定★

                // 現在のウィンドウ幅に基づいて、本の新しいサイズ（ピクセル値）を計算する関数
                function calculateBookSize() {
                    const viewportWidth = $(window).width();
                    
                    // 768px以下は90%、PCは70%の比率を適用
                    let widthRatio = (viewportWidth <= 768) ? 0.90 : 0.70;
                    
                    // 新しい幅を計算 (ピクセル)
                    const newWidth = Math.round(viewportWidth * widthRatio);
                    
                    // アスペクト比を維持して高さを計算
                    const newHeight = Math.round(newWidth / ASPECT_RATIO);
                    
                    return { width: newWidth, height: newHeight };
                }

                function loadApp() {
                    // 初回ロード時にサイズを計算
                    const initialSize = calculateBookSize();

                    // 1. turn.js の初期化: ピクセル値で初期化
                    $('.letterBook').turn({
                        width: initialSize.width,
                        height: initialSize.height,
                        elevation: 10,
                        gradients: true,
                        autoCenter: true
                    });

                    // 2. センタリングの調整とイベントリスナーの設定
                    const $book = $('.letterBook');
                    const $pageInput = $('#page-input');

                    // ★センタリングとリサイズを実行する共通関数★
                    function applyCenteringAndResize() {
                        const newSize = calculateBookSize();
                        
                        // 1. turn.js のサイズを強制的に変更
                        $book.turn('size', newSize.width, newSize.height);
                        
                        // 2. 水平方向のセンタリングを適用
                        // left: 50% と transform: translate(-50%, 0) で中央寄せ後、
                        // ★ズレを補正するために -1px を追加します。この '1px' を調整してください。★
                        $book.css({
                            'position': 'relative',
                            'left': '50%',
                            'transform': 'translate(-50%, 5%)'

                        });
                    }
                    
                    // 3. イベントハンドラの設定
                    
                    $book.bind('turned', function(event, page) {
                        // 現在の表示ページ番号を input に反映
                        $pageInput.val(page); 
                    });

                    // ページフリップイベント: turn.js の挙動後に位置をリセット
                    $book.bind('turned turning', function() {
                        applyCenteringAndResize();
                    });
                    
                    // ウィンドウサイズ変更イベント: サイズ変更時にリサイズと位置調整
                    $(window).bind('resize', function(){
                        applyCenteringAndResize();
                    }).trigger('resize'); // ページロード時に一度実行

                    const $jumpButton = $('#jump-button');

                    function goToPageFromInput() {
                        let desiredPage = parseInt($pageInput.val(), 10);
                        
                        // 入力値のバリデーション
                        if (isNaN(desiredPage) || desiredPage < 1 || desiredPage > TOTAL_PAGES) {
                            alert(`ページ番号は1から${TOTAL_PAGES}の間で入力してください。`);
                            $pageInput.val($book.turn('page')); // 現在のページ番号に戻す
                            return;
                        }

                        // turn.js のメソッドでページ遷移を実行
                        $book.turn('page', desiredPage);
                    }

                    if ($jumpButton.length) {
                        $jumpButton.on('click', goToPageFromInput);
                        
                        // Enterキーでのジャンプも有効にする
                        $pageInput.on('keypress', function(e) {
                            if (e.key === 'Enter') {
                                goToPageFromInput();
                            }
                        });
                    }

                    // 初期ロード時に入力ボックスの最大値を設定
                    $pageInput.attr('max', TOTAL_PAGES);
                    $pageInput.val($book.turn('page') || 1); // 初期ページを1に設定
                }

                // Load the HTML4 version if there's not CSS transform

                yepnope({
                    test : Modernizr.csstransforms,
                    yep: ['../../js/lib/turn.js'],
                    nope: ['../../js/lib/turn.html4.min.js'],
                    both: ['../../css/notebook.css'],
                    complete: loadApp
                });
            </script>
        <div class="page-jump-controls">
            <label for="page-input">ページ:</label>
            <input type="number" id="page-input" min="1" max="86" value="1">
            <span class="page-info">/ 86 ページ</span>
            <button id="jump-button">ジャンプ</button>
        </div>
                <div class = "text">
            <p>ページをめくってみてね！</p>
            <p>ページをタップすると拡大されます！</p>
        </div>
        </main>
        <!--mainここまで-->

        <!--footerここから-->
        <footer>
            
            <div class="footer-links">
                <a href="../message/index.html">メッセージ</a>|
                <a href="../illust/index.html">イラスト</a>|
                <a href="../information/index.html">インフォ</a>|
                <a href="../../index.html">TOP</a>
            </div>
            
            <div class="footer-social">
            <a href="https://x.com/kannkikaku?s=21&t=5o0lw-318r4fDGVlBy44OQ" target="_blank" rel="noopener">
                <img src="../../images/X.png" alt="Xアカウント" class="x-icon">
            </a>
            </div>

            <div class="footer-copy">
                © 菅叶和誕生日企画 2025 some rights reserved.
            </div>

        </footer>
        <!--footerここまで-->
    </div>

    <div class="bottom-nav">
        <a href="../message/index.html">
            <img src="../../images/message.png" alt="メッセージ">
            <span>メッセージ</span>
        </a>
        <a href="../illust/index.html">
            <img src="../../images/illust.png" alt="イラスト">
            <span>イラスト</span>
        </a>
        <a href="../information/index.html">
            <img src="../../images/information.png" alt="インフォ">
            <span>インフォ</span>
        </a>
        <a href="../../index.html">
            <img src="../../images/home.png" alt="TOPに戻る">
            <span>TOP</span>
        </a>
    </div>

    <script src="../../js/transition.js"></script>
</body>
</html>
